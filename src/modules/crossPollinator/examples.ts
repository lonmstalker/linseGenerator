/**
 * Library of successful hybrid examples
 * Organized by fusion method
 */

import { ExampleHybrid } from './types';

export const HYBRID_EXAMPLES: Record<string, ExampleHybrid[]> = {
  structural: [
    {
      sourceA: 'Blockchain',
      sourceB: 'Democracy',
      result: 'Decentralized voting system with immutable transparent history',
      emergentProperty: 'Trust through transparency while maintaining voter anonymity'
    },
    {
      sourceA: 'Wikipedia',
      sourceB: 'Git version control',
      result: 'Knowledge base with branching timelines and merge conflicts',
      emergentProperty: 'Multiple valid versions of truth coexisting until consensus'
    },
    {
      sourceA: 'Skyscraper',
      sourceB: 'Tree root system',
      result: 'Building with inverted foundation growing deeper as it rises',
      emergentProperty: 'Self-stabilizing architecture that strengthens under load'
    },
    {
      sourceA: 'Social network',
      sourceB: 'Immune system',
      result: 'Platform that develops antibodies against toxic content',
      emergentProperty: 'Community health improving through exposure and adaptation'
    },
    {
      sourceA: 'Assembly line',
      sourceB: 'Jazz band',
      result: 'Production system with improvisation nodes',
      emergentProperty: 'Efficiency through structured spontaneity'
    }
  ],
  
  functional: [
    {
      sourceA: 'Search engine',
      sourceB: 'Therapist',
      result: 'Query system that understands emotional context behind searches',
      emergentProperty: 'Healing through information discovery'
    },
    {
      sourceA: 'Calendar',
      sourceB: 'Weather prediction',
      result: 'Scheduling system adapting to mood and energy forecasts',
      emergentProperty: 'Optimal timing through internal climate awareness'
    },
    {
      sourceA: 'GPS navigation',
      sourceB: 'Life coach',
      result: 'Wayfinding system for life decisions and career paths',
      emergentProperty: 'Literal and metaphorical journey alignment'
    },
    {
      sourceA: 'Fitness tracker',
      sourceB: 'Dream journal',
      result: 'Holistic health monitor connecting physical and subconscious patterns',
      emergentProperty: 'Body-mind correlation insights'
    },
    {
      sourceA: 'Translation app',
      sourceB: 'Emotion detector',
      result: 'Communication tool preserving feelings across languages',
      emergentProperty: 'Cultural empathy through affective translation'
    }
  ],
  
  conceptual: [
    {
      sourceA: 'Minimalism',
      sourceB: 'Biodiversity',
      result: 'Essential complexity - maximum variety from minimum elements',
      emergentProperty: 'Rich ecosystems from simple rules'
    },
    {
      sourceA: 'Quantum uncertainty',
      sourceB: 'Decision making',
      result: 'Superposition strategy keeping all options open until observation',
      emergentProperty: 'Increased success through delayed commitment'
    },
    {
      sourceA: 'Entropy',
      sourceB: 'Creativity',
      result: 'Disorder as generative force for innovation',
      emergentProperty: 'Order emerging from intentional chaos'
    },
    {
      sourceA: 'Fractal geometry',
      sourceB: 'Organizational structure',
      result: 'Self-similar teams at every scale of company',
      emergentProperty: 'Infinite scalability with consistent culture'
    },
    {
      sourceA: 'Time dilation',
      sourceB: 'Productivity',
      result: 'Work intensity creating subjective time expansion',
      emergentProperty: 'More accomplished in less objective time'
    }
  ],
  
  dialectical: [
    {
      sourceA: 'Privacy',
      sourceB: 'Transparency',
      result: 'Selective disclosure with granular control and purpose-binding',
      emergentProperty: 'Trust through verified partial revelation'
    },
    {
      sourceA: 'Competition',
      sourceB: 'Collaboration',
      result: 'Coopetition ecosystem with dynamic alliance formation',
      emergentProperty: 'Collective advancement through productive rivalry'
    },
    {
      sourceA: 'Tradition',
      sourceB: 'Innovation',
      result: 'Living heritage that evolves while preserving essence',
      emergentProperty: 'Future-proof cultural continuity'
    },
    {
      sourceA: 'Individual freedom',
      sourceB: 'Collective responsibility',
      result: 'Autonomy networks with emergent coordination',
      emergentProperty: 'Spontaneous order from free agents'
    },
    {
      sourceA: 'Scarcity',
      sourceB: 'Abundance',
      result: 'Curated limitation creating value through conscious constraint',
      emergentProperty: 'Wealth through selective poverty'
    }
  ],
  
  quantum: [
    {
      sourceA: 'Online presence',
      sourceB: 'Offline reality',
      result: 'Quantum identity existing in multiple states simultaneously',
      emergentProperty: 'Context-collapsed self actualizing per observer'
    },
    {
      sourceA: 'Work',
      sourceB: 'Play',
      result: 'Superposition activity collapsing based on measurement criteria',
      emergentProperty: 'Productivity indistinguishable from enjoyment'
    },
    {
      sourceA: 'Teaching',
      sourceB: 'Learning',
      result: 'Knowledge exchange in quantum flux until understanding crystallizes',
      emergentProperty: 'Bidirectional education with role uncertainty'
    },
    {
      sourceA: 'Planning',
      sourceB: 'Improvisation',
      result: 'Quantum strategy existing as probability cloud until action',
      emergentProperty: 'Prepared spontaneity with multiple futures'
    },
    {
      sourceA: 'Centralized control',
      sourceB: 'Distributed autonomy',
      result: 'Governance superposition collapsing based on decision type',
      emergentProperty: 'Optimal authority manifestation per context'
    }
  ],
  
  biomimetic: [
    {
      sourceA: 'City infrastructure',
      sourceB: 'Mycelial networks',
      result: 'Urban systems with underground resource-sharing networks',
      emergentProperty: 'Cities that heal and adapt like forests'
    },
    {
      sourceA: 'Corporate structure',
      sourceB: 'Ant colony',
      result: 'Organization with pheromone-like information trails',
      emergentProperty: 'Swarm intelligence in business decisions'
    },
    {
      sourceA: 'Education system',
      sourceB: 'Ecosystem succession',
      result: 'Learning environments that evolve through stages naturally',
      emergentProperty: 'Self-organizing curriculum adaptation'
    },
    {
      sourceA: 'Social media',
      sourceB: 'Coral reef',
      result: 'Platform creating protective structures for vulnerable communities',
      emergentProperty: 'Diversity thriving through mutual support structures'
    },
    {
      sourceA: 'Supply chain',
      sourceB: 'Circulatory system',
      result: 'Distribution network with self-healing redundancies',
      emergentProperty: 'Adaptive flow responding to real-time needs'
    }
  ],
  
  temporal: [
    {
      sourceA: 'Ancient wisdom',
      sourceB: 'AI prediction',
      result: 'Timeless principles guiding future scenarios',
      emergentProperty: 'Prophetic technology grounded in eternal truths'
    },
    {
      sourceA: 'Historical patterns',
      sourceB: 'Real-time data',
      result: 'Predictive system using past cycles to interpret present',
      emergentProperty: 'Future sight through temporal pattern matching'
    },
    {
      sourceA: 'Ritual practices',
      sourceB: 'Agile methodology',
      result: 'Sacred sprints with ceremonial retrospectives',
      emergentProperty: 'Spiritual productivity through cyclical time'
    },
    {
      sourceA: 'Generational knowledge',
      sourceB: 'Instant communication',
      result: 'Wisdom streaming across time barriers',
      emergentProperty: 'Ancestral guidance in real-time decisions'
    },
    {
      sourceA: 'Future visioning',
      sourceB: 'Archaeological method',
      result: 'Excavating tomorrow\'s artifacts from possibility space',
      emergentProperty: 'Present action guided by future archaeology'
    }
  ]
};

/**
 * Get examples for specific method
 */
export function getExamplesForMethod(method: string): ExampleHybrid[] {
  return HYBRID_EXAMPLES[method] || [];
}

/**
 * Find similar examples based on components
 */
export function findSimilarExamples(ideaA: string, ideaB: string, method: string): ExampleHybrid[] {
  const examples = HYBRID_EXAMPLES[method] || [];
  const ideaALower = ideaA.toLowerCase();
  const ideaBLower = ideaB.toLowerCase();
  
  // Score examples by relevance
  const scoredExamples = examples.map(example => {
    let score = 0;
    
    // Check if source ideas contain similar concepts
    if (example.sourceA.toLowerCase().includes(ideaALower) || 
        ideaALower.includes(example.sourceA.toLowerCase())) {
      score += 2;
    }
    if (example.sourceB.toLowerCase().includes(ideaBLower) || 
        ideaBLower.includes(example.sourceB.toLowerCase())) {
      score += 2;
    }
    
    // Check for thematic similarity
    const exampleWords = [
      ...example.sourceA.toLowerCase().split(/\s+/),
      ...example.sourceB.toLowerCase().split(/\s+/)
    ];
    const ideaWords = [
      ...ideaALower.split(/\s+/),
      ...ideaBLower.split(/\s+/)
    ];
    
    for (const word of ideaWords) {
      if (exampleWords.some(ew => ew.includes(word) || word.includes(ew))) {
        score += 0.5;
      }
    }
    
    return { example, score };
  });
  
  // Sort by score and return top matches
  return scoredExamples
    .sort((a, b) => b.score - a.score)
    .slice(0, 3)
    .map(item => item.example);
}

/**
 * Get random inspiring example
 */
export function getRandomInspiringExample(): ExampleHybrid {
  const allExamples = Object.values(HYBRID_EXAMPLES).flat();
  const randomIndex = Math.floor(Math.random() * allExamples.length);
  return allExamples[randomIndex]!;
}